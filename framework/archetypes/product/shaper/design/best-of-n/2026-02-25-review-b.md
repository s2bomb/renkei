# Review B -- Shaper Archetype

## Top 5 Issues (Ranked)

1. **Role purity leak in core process**
   - `framework/archetypes/product/shaper/doctrine/process.md` Step 3 says "Delegate or perform problem exploration." This blurs the shaper vs problem-analyst boundary and weakens conviction-level identity.

2. **Delegation semantics are under-specified for vanilla OpenCode reliability**
   - `framework/archetypes/product/shaper/doctrine/orchestration.md` has the right idea (general + first-step Skill), but it lacks strict return-path requirements, artifact path requirements, and failure-handling loop semantics used by high-reliability orchestrators.

3. **Conviction language is solid but not yet zealot-grade enforcement**
   - `framework/archetypes/product/shaper/ethos/identity.md` and `framework/archetypes/product/shaper/ethos/tenets.md` are clear, but they do not enforce a hard fail condition when boundaries are missing (no appetite/no-gos/assumption tags). The archetype reads principled, not uncompromising.

4. **Output contract does not force evidence quality strongly enough**
   - `framework/archetypes/product/shaper/doctrine/output-contract.md` requires structure, but not minimum citation density or explicit traceability per major claim. This allows polished but weak artifacts.

5. **Template permits shallow shaping artifacts**
   - `framework/archetypes/product/shaper/references/template.md` is concise, but fields are too permissive. It lacks required claim-evidence mapping and an explicit unresolved-decision section for the decision owner.

## Concrete File-Level Edits Recommended

1. **Enforce role purity in process**
   - Edit `framework/archetypes/product/shaper/doctrine/process.md` Step 3:
     - Replace "Delegate or perform problem exploration" with "Delegate problem exploration to problem-analyst by default; perform directly only when analyst role is unavailable and record role emulation explicitly."
     - Add a hard gate before Step 6: "If analyst brief is missing for ambiguous/multi-item inputs, stop synthesis."

2. **Upgrade orchestration to practical OpenCode-grade delegation contract**
   - Edit `framework/archetypes/product/shaper/doctrine/orchestration.md`:
     - Add mandatory delegation fields: required output path, required section schema, and required citation format.
     - Add retry rule: if returns miss contract fields, re-delegate with explicit defect list.
     - Add explicit `Task(description=..., subagent_type="general", prompt=...)` pattern with stable wording copied from architect-opencode style.

3. **Increase conviction enforcement in ethos**
   - Edit `framework/archetypes/product/shaper/ethos/tenets.md`:
     - Add tenet: "No boundary, no handoff" (if appetite/no-gos/rabbit-holes missing, item cannot be marked proposed-active).
   - Edit `framework/archetypes/product/shaper/ethos/principles.md`:
     - Add principle: "Escalate ambiguity, do not mask it" with explicit prohibition on fake certainty.

4. **Tighten artifact quality gates**
   - Edit `framework/archetypes/product/shaper/doctrine/output-contract.md`:
     - Add gate: each major problem claim must cite source evidence or be explicitly labeled uncertainty.
     - Add gate: each rabbit-hole row must include a concrete consequence if wrong.
     - Add gate: an `active` state requires explicit decision-owner acknowledgment field.

5. **Strengthen shaped-item template for downstream usability**
   - Edit `framework/archetypes/product/shaper/references/template.md`:
     - Add table under Problem Statement: `Claim | Evidence | Confidence`.
     - Add section: "Decision Required" (what exactly the decision owner must approve now).
     - Add section: "Handoff Packet" with required links (analyst brief, source files, unresolved assumptions).

## Must Keep Strengths

- Truth set is strong and coherent (`framework/archetypes/product/shaper/truth/*.md`): framing-first, risk surfacing, constraints, multi-lens synthesis, rough/solved/bounded all converge cleanly.
- Identity split is correct (`framework/archetypes/product/shaper/ethos/identity.md`): shaper is synthesis owner, not bettor, not technical designer.
- Delegation direction is aligned with vanilla OpenCode reality (`framework/archetypes/product/shaper/ethos/principles.md`, `framework/archetypes/product/shaper/doctrine/orchestration.md`): `general` + first-step Skill invocation is the right primitive.
- Commitment boundary is explicit (`framework/archetypes/product/shaper/doctrine/pipeline.md`): human decision gate preserved.
- Output contract already encodes Shape Up core sections (`framework/archetypes/product/shaper/doctrine/output-contract.md`) and should be hardened, not replaced.

## Sample Delegated Prompt Block (OpenCode-Compatible)

```python
Task(
  description="Analyze shaped intake",
  subagent_type="general",
  prompt="""
STOP. READ THIS BEFORE DOING ANYTHING.

Your FIRST action MUST be to call the Skill tool with skill: 'problem-analyst' and args: '[project path] [sources path(s)] [validation questions]'.

DO NOT start reading files, grepping, or exploring before Skill invocation.
Again: Step 1 is Skill tool invocation. Nothing else comes first.

Return exactly:
1. Evidence-backed validation findings (with citations)
2. Scope decomposition (itemized, with dependencies)
3. Assumptions tagged by validity/necessity
4. Open risks and unresolved questions
5. Proposed in-scope and out-of-scope boundaries per item

Write artifact to: {project_root}/working/problem-analysis-latest.md
"""
)
```
